<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Lotka-Volterra Models in the Wolfram Language - Phileas Dazeley-Gaist</title><meta name="description" content="Note: This post was originally a short technical article I shared on&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><script type="text/javascript" async src="https://www.googletagmanager.com/gtag/js?id=G-K13VH578CQ"></script><script type="text/javascript">window.dataLayer = window.dataLayer || [];
				  function gtag(){dataLayer.push(arguments);}
				  gtag('js', new Date());
				  gtag('config', 'G-K13VH578CQ' );</script><link rel="canonical" href="https://phileasdg.github.io/lotka-volterra-models-in-the-wolfram-language/"><link rel="alternate" type="application/atom+xml" href="https://phileasdg.github.io/feed.xml"><link rel="alternate" type="application/json" href="https://phileasdg.github.io/feed.json"><meta property="og:title" content="Lotka-Volterra Models in the Wolfram Language"><meta property="og:image" content="https://phileasdg.github.io/media/posts/32/Screenshot-2023-10-11-at-00.12.50.png"><meta property="og:image:width" content="2394"><meta property="og:image:height" content="810"><meta property="og:site_name" content="Phileas Dazeley-Gaist"><meta property="og:description" content="Note: This post was originally a short technical article I shared on&hellip;"><meta property="og:url" content="https://phileasdg.github.io/lotka-volterra-models-in-the-wolfram-language/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@phileasdg"><meta name="twitter:title" content="Lotka-Volterra Models in the Wolfram Language"><meta name="twitter:description" content="Note: This post was originally a short technical article I shared on&hellip;"><meta name="twitter:image" content="https://phileasdg.github.io/media/posts/32/Screenshot-2023-10-11-at-00.12.50.png"><link rel="stylesheet" href="https://phileasdg.github.io/assets/css/style.css?v=ff30ce3ac4c3be676e9c9a0dc5db8575"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://phileasdg.github.io/lotka-volterra-models-in-the-wolfram-language/"},"headline":"Lotka-Volterra Models in the Wolfram Language","datePublished":"2023-10-10T14:21","dateModified":"2024-05-02T09:47","image":{"@type":"ImageObject","url":"https://phileasdg.github.io/media/posts/32/Screenshot-2023-10-11-at-00.12.50.png","height":810,"width":2394},"description":"Note: This post was originally a short technical article I shared on&hellip;","author":{"@type":"Person","name":"Phileas Dazeley-Gaist","url":"https://phileasdg.github.io/authors/phileas-dazeley-gaist/"},"publisher":{"@type":"Organization","name":"Phileas Dazeley-Gaist"}}</script><a hidden rel="me" href="https://mathstodon.xyz/@phileasdg">Mastodon</a></head><body><header class="header" id="js-header"><a href="https://phileasdg.github.io/" class="logo">Phileas Dazeley-Gaist</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://phileasdg.github.io/" target="_self">Home</a></li><li><a href="https://phileasdg.github.io/a-few-words-about-me/" target="_self">About</a></li><li><a href="https://phileasdg.github.io/resume-cv/" target="_self">Resume / CV</a></li><li><a href="https://phileasdg.github.io/inquiries/" target="_self">Inquiries</a></li></ul></nav></header><main><div class="wrapper"><article class="post"><header class="post__header"><a href="https://phileasdg.github.io/tags/ecology/" class="post__maintag">Ecology</a><h1 class="post__title">Lotka-Volterra Models in the Wolfram Language</h1><div class="post__meta"><div class="post__author">By <a href="https://phileasdg.github.io/authors/phileas-dazeley-gaist/" class="invert" rel="author" title="Phileas Dazeley-Gaist">Phileas Dazeley-Gaist</a></div><time datetime="2023-10-10T14:21">October 10, 2023</time></div></header><figure class="post__featured-image"><img src="https://phileasdg.github.io/media/posts/32/Screenshot-2023-10-11-at-00.12.50.png" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2023-10-11-at-00.12.50-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2023-10-11-at-00.12.50-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2023-10-11-at-00.12.50-md.png 768w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2023-10-11-at-00.12.50-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="eager" height="810" width="2394" alt=""></figure><div class="post__inner"><div class="post__entry"><p class="msg msg--info"><strong>Note: </strong>This post was originally a short technical article I shared on the Wolfram Community forums. If you would like to interact with live demonstrations, or download a wolfram notebook version of this text including the source code, you can access the original <a href="https://community.wolfram.com/groups/-/m/t/3028599">here</a>. For the sake of brevity and readability, I have omitted most code implementation sections present in the original article. If you are looking to reproduce a function from this article and need the source code, please head to the original post.</p><h2>Introduction: A review of the Lotka-Volterra Model</h2><h3>Overview</h3><div id="cell-c3a94280-e8a4-4954-ac9d-109d26687d61" class="cell"><div class="cell-wrapper"><div class="cell-content"><div><div class="native-layout native-layout-simple"><span class="cc3" data-native-text="true">The Lotka-Volterra model, proposed in the early 20th century by mathematicians Alfred J. Lotka (1880-1949) and Vito Volterra (1860-1940), is an influential framework widely used to explore population dynamics of closed ecological systems.</span></div></div></div></div></div><div id="cell-6a2d1478-3121-4d98-924f-9325cd35f2f4" class="cell"><div class="cell-wrapper"><div class="_3Dqn7hOe5vVS6Nh0S54gcV"> </div><div class="cell-content"><div class="native-layout native-layout-simple"><span class="cc3" data-native-text="true"><span class="cc3" data-native-text="true">In general, the Lotka-Volterra model refers to the classic two-species construction by Lotka and Volterra, in which the respective instantaneous rates of population change of a predator and prey species are tied to the other species’ population size. In the two </span></span><span class="cc3" data-native-text="true">species case, the Lotka-Volterra model usually results in periodic population “boom and bust” cycles in which the predator population closely follows but lags behind the prey’s (Bacaër 2011).</span></div></div></div></div><div id="cell-45ba991c-2672-48ea-bd83-7c376c0fba06" class="cell"><div class="cell-wrapper"><div class="_3Dqn7hOe5vVS6Nh0S54gcV"> </div><div class="cell-content"><div><div class="native-layout native-layout-simple"><span class="cc3" data-native-text="true">Lotka proposed the classic formulation of the model in 1910 as a model of autocatalytic chemical reactions (Lotka 1910). In 1920, he applied the model to a two species food chain involving an idealised plant species and grazing predator (Lotka 1920). In 1925, Volterra independently began studying predator-prey interactions and published a short discussion of the subject in 1926 (Bacaër 2011). While Volterra’s work on the subject focused strictly on modelling predator-prey interactions in fisheries (Volterra 1927), Lotka took a broader interest in exploring competitive interactions and studying the “energetics of evolution” (Lotka 1922). He argued that natural selection could be understood as a physical principle as general as the laws of thermodynamics (Kingsland 2015).</span></div></div></div></div></div><div id="cell-c2b48c5c-b6f1-4b04-be5c-3dedc320f043" class="cell"><div class="cell-wrapper"><div class="_3Dqn7hOe5vVS6Nh0S54gcV"> </div><div class="cell-content"><div><div class="native-layout native-layout-simple"><span class="cc3" data-native-text="true">Lotka’s work is noteworthy beyond its contributions to the fields of theoretical population ecology, physical chemistry, and dynamical systems (non-exhaustive) for its interdisciplinarity. He envisioned and worked to create a new biological discipline, “physical biology”, which would apply physical principles and techniques to the study of biological systems composed of processes involving the exchange of matter or energy between system components (Kingsland, 2015). Lotka collected and published these ideas in </span><span class="cc14" data-native-text="true">Elements of Physical Biology </span><span class="cc3" data-native-text="true">(1925).</span></div></div></div></div></div><div id="cell-64e966f6-bdd6-4625-88b1-c3c0e5efbd49" class="cell"><div class="cell-wrapper"><div class="_3Dqn7hOe5vVS6Nh0S54gcV"> </div><div class="cell-content"><div class="native-layout native-layout-simple"><span class="cc3" data-native-text="true">Lotka-Volterra models serve as critical conceptual tools for ecologists, lending remarkable insights into real-world ecological system dynamics. Its simplicity makes it an excellent choice to demonstrate key ideas about predator-prey interactions, including the influential concept of the prey-predator cycle, whereby prey abundance increases followed by a delayed increase in predators. Its principles have been refined and extended by many subsequent researchers and continue to hold relevance. The primary contribution of the Lotka-Volterra model to the field of ecology is the theoretical underpinning it provides for understanding interspecies interactions, (mainly predation and competition). This fundamental understanding has guided the development of more complex models for describing the dynamics of entire ecosystems.</span></div><h3>How does it work?</h3><div id="cell-f023857b-392c-44a9-ae6e-9bdbaf3b962e" class="cell"><div class="cell-wrapper"><div class="cell-content"><div><div class="native-layout native-layout-simple"><span class="cc3" data-native-text="true">Consider two species, one which preys on the other (for example, the Canada lynx and snowshoe hare). Let </span><em><span class="cc14" data-native-text="true">x(t)</span></em><span class="cc3" data-native-text="true"> be the population density of the prey, and </span><em><span class="cc14" data-native-text="true">y(t)</span></em><span class="cc3" data-native-text="true"> be the population density of the predators at time </span><em><span class="cc14" data-native-text="true">t</span></em><span class="cc3" data-native-text="true">. To capture how the populations of each species will vary over time, we need two kinds of information:</span></div></div></div></div></div><div id="cell-5239e989-3a09-491c-8b0c-4b1648af9769" class="cell"><div class="cell-wrapper"><ol><li class="_3Dqn7hOe5vVS6Nh0S54gcV"><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">The growth rates of the species population in the absence of the other species.</span></li><li class="_3Dqn7hOe5vVS6Nh0S54gcV">The effect of the presence of the other species on each species’ growth.</li></ol></div></div><div id="cell-bb246bdb-f5b8-461b-8235-c004afe4bf3f" class="cell"><div class="cell-wrapper"><div class="_3Dqn7hOe5vVS6Nh0S54gcV"> </div><div class="cell-content"><div class="native-layout native-layout-simple"><span class="cc3" data-native-text="true">In the classic formulation by Alfred J. Lotka, (1920), these parameters are </span><span class="cc14" data-native-text="true"><em>a</em>, <em>b</em>, <em>c</em>,</span><span class="cc3" data-native-text="true"> and </span><em><span class="cc14" data-native-text="true">d</span></em><span class="cc3" data-native-text="true">, where:</span></div></div></div></div><div id="cell-a3ba13e8-e138-432e-ac6f-e82c06d31edb" class="cell"><div class="cell-wrapper"><div class="HExNUSO6Shz5hgqMOEW9X"><div class="cell-dingbat"><ul><li class="lines"><em><span class="cc14" style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);" data-native-text="true">a</span></em><span class="cc3" style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);" data-native-text="true"> is the intrinsic growth rate of the prey species</span></li><li class="lines"><em>b</em><span class="cc3" style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);" data-native-text="true"> is the effect of the predators on the prey species growth rate; the rate at which predators kill prey</span></li><li><em><span class="cc14" style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);" data-native-text="true">c</span></em><span class="cc3" style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);" data-native-text="true"> is the death rate of the predator species when there are no prey</span></li><li><em>d</em><span class="cc3" style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);" data-native-text="true"> is the effect of the prey on the predator species growth rate; the rate at which the predator population grows from consuming prey</span></li></ul></div></div></div></div><div id="cell-66e601fc-fea5-4394-9542-5575b3f4df4c" class="cell"><div class="cell-wrapper"><div class="_3Dqn7hOe5vVS6Nh0S54gcV"> </div><div class="cell-content"><div class="native-layout native-layout-simple"><span class="cc3" data-native-text="true">Using these parameters, we can write the coupled system of ordinary differential equations:</span></div></div></div></div><div id="cell-4a78be8d-14d9-414a-be6b-8d0cff42114c" class="cell"><div class="cell-wrapper"><div class="_3Dqn7hOe5vVS6Nh0S54gcV"><figure class="post__image align-center"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-13.03.23.png" alt="" width="198" height="127" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.03.23-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.03.23-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.03.23-md.png 768w"></figure></div><div> </div></div></div><div id="cell-e07d02be-46c2-4e1e-b152-dc7aa7f24459" class="cell"><div class="cell-wrapper"><div class="cell-content"><div class="native-layout native-layout-simple"><span class="cc3" data-native-text="true">We assume that each of these parameters is positive. The terms </span><em><span class="cc14" data-native-text="true">-b x y</span></em><span class="cc3" data-native-text="true"> and </span><em><span class="cc14" data-native-text="true">d x y</span></em><span class="cc3" data-native-text="true"> indicate that the larger prey and predator species are, the higher the mass/population/energy transfer from prey to predators will be.<br></span></div><h3><em>Implementation: </em>In the Wolfram Language</h3><p class="Text">Setting up a Lotka-Volterra model in the Wolfram Language is very straightforward using <code><span class="InputInline"><a href="http://reference.wolfram.com/mathematica/ref/NDSolve.html"><span class="LinkInline">NDSolve</span></a></span></code>, WL’s numerical differential equations solver.</p><ul><li class="ItemNumbered">Since we know the model takes two initial conditions (species population sizes) and four parameters (<em>a</em>, <em>b</em>, <em>c</em>, <em>d</em>), we can write a helper function that takes in this information and returns the appropriate coupled equations:</li></ul><p class="CodeText"><em>Set up the ODEs and initial conditions describing a two-species Lotka-Volterra model:</em></p><figure class="post__image align-left"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-13.14.07.png" alt="" width="415" height="264" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.14.07-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.14.07-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.14.07-md.png 768w"></figure><p><em>Example:</em></p><figure class="post__image align-left"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-13.14.36.png" alt="" width="323" height="116" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.14.36-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.14.36-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.14.36-md.png 768w"></figure><ul><li class="ItemNumbered">Now, we can simply call our helper function inside <span class="InputInline"><span class="InputFormInline">NDSolve</span></span>, specifying our initial conditions and parameters. Additionally, we supply a list of variables to solve for, and another containing the name and range of the independent variable, <em>t</em>.</li></ul><figure class="post__image align-left"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2023-10-10-at-14.28.14.png" alt="" width="1388" height="198" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2023-10-10-at-14.28.14-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2023-10-10-at-14.28.14-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2023-10-10-at-14.28.14-md.png 768w"></figure><ul><li>Finally, we can plot these results in the time domain and state space:</li></ul><p class="align-left"><em>Time domain plot:</em></p><figure class="post__image align-left"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-13.09.18.png" alt="" width="461" height="298" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.09.18-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.09.18-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.09.18-md.png 768w"></figure><p><em>State space portrait: (I have iconised the options to make the code more readable, please visit the original community post to view the full code)</em></p><figure class="post__image align-left"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-13.12.40.png" alt="" width="1452" height="1238" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.12.40-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.12.40-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.12.40-md.png 768w"></figure><h2>Relationships and Food Webs</h2><h3>Predation Relationships and Food Webs</h3><p class="Text">Suppose we would like to extend our model to three or more species. For a given <em>n</em>-species system, will need too keep track of the <strong>relationships</strong> between species, and their <strong>effects</strong> on one another. We will discuss two ways of storing this information: one to facilitate our conceptual understanding of model configurations, and the other to facilitate the process of building the model system of ODEs. We will discuss the first of these ways here.</p><p class="Text">Notice that as the number of species n in our model grows, so does the number of possible relationships between species (at a rate of 2^<em>n</em>, or 2^(<em>n</em>-1) if we assume the absence of cannibalism in the community). The number of possible combinations of relationships also grows without bounds (at a rate of 2^(<em>n</em>^2), or 2^((<em>n</em>-1)^2)without cannibalism). A set of predation relationships between species is known as a food web.</p><p class="Text">In a food web, predation relationships are usually represented as arrows from prey to predator species, representing transfer of energy up the web’s component food chains.</p><figure class="post__image align-center"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-13.15.55.png" alt="" width="234" height="278" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.15.55-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.15.55-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.15.55-md.png 768w"></figure><p><span class="cc3" data-native-text="true">Since food webs are graphs, we can express them directly in the Wolfram Language using </span><span class="cc44" data-native-text="true">Graph</span><span class="cc3" data-native-text="true"> objects (see documentation: </span><code><a href="https://reference.wolfram.com/language/ref/Graph.html"><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">Graph</span></a></code><span class="cc3" data-native-text="true">). Not all food web configurations will be ecologically meaningful, and some will be analogous to one-another, but expressing them like this helps to get a strong qualitative impression of the relationships they depict (Are we modelling a really simple web, or is it very complicated? How tangled is it? How loopy? How close together are the species? Do they form clusters? And so on). We can also answer questions about the food web parameter spaces. For instance: what structurally distinct categories of 3-species food web are there?</span></p><figure class="post__image align-center"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-13.17.56.png" alt="" width="481" height="577" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.17.56-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.17.56-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.17.56-md.png 768w"></figure><h3>Aside: What species relationships are possible in an <em>n</em>-species system?</h3><p>We can write a function to generate the possible predation configurations for a species in an n-species food web.</p><p><em>Predation configurations for a species in an n-species food web:</em></p><figure class="post__image"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-13.18.42.png" alt="" width="1568" height="514" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.18.42-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.18.42-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.18.42-md.png 768w"></figure><p>In a 3-species food web, the predation relationship configurations for a species N1 are:</p><figure class="post__image align-center"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-15.18.48.png" alt="" width="276" height="414" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-15.18.48-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-15.18.48-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-15.18.48-md.png 768w"></figure><p>We can sample possible food web configurations randomly, but this will rarely yield realistic food webs for most contexts. Instead, we might restrict configurations to a subset of forms that fit our criteria, or we might simply look to real world systems for examples.</p><p><em>Random valid 3-species food webs (with cannibalism):</em></p><figure class="post__image"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-13.19.19.png" alt="" width="1498" height="282" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.19.19-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.19.19-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.19.19-md.png 768w"></figure><p><em>Random valid 3-species food webs (without cannibalism):</em></p><figure class="post__image"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-13.19.48.png" alt="" width="1526" height="298" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.19.48-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.19.48-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.19.48-md.png 768w"></figure><h3>Species to Species Effects Representation: The Community Matrix</h3><p>Whereas graphs are great at helping us intuit the nature of interactions in a community, we typically express interactions in n-species Lotka-Volterra models using a matrix of interaction coefficients called an <em>interaction matrix</em>. A perk of this strategy is that it allows us to write the generalised Lotka-Volterra model in a condensed form using linear algebra. We will discuss this condensed form shortly. When the matrix stores the effects of species on other species growth rates, we call this matrix a <em>community matrix</em>.</p><p>Community matrices are a key concept in quantitative ecology and are used in many competition and predation models. A community matrix A is a square matrix where each element represents the interaction strength between pairs of species in an ecological community. Each cell <em>A[i,j]</em> represents the effect of the average species <em>j</em> individual on species <em>i</em>’s population growth rate (Novak et al. 2016). The principal diagonal of the matrix captures the species self-interactions, which we usually assume to be negative, to capture the effect of interspecific competition. This constrains species growth in the absence of prey, imposing implicit instantaneous carrying capacities of the system for different species.</p><figure class="post__image align-center"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-13.21.29.png" alt="" width="354" height="120" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.21.29-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.21.29-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.21.29-md.png 768w"></figure><p class="Text">Note that values in an interaction matrix don’t necessarily correspond to predation relationships. If both <em>A[i,j]</em> and <em>A[j,i]</em> are negative, then the two species are considered to be in direct competition with one another as they negatively affect each other’s population. If <em>A[i,j]</em> is positive but <em>A[i,j]</em> is negative then species <em>i</em> is a predator or parasite of species <em>j</em>, since <em>i</em>’s population grows at <em>j</em>’s expense (Positive values for <em>A[i,j] </em>and <em>A[j,i] </em>would be considered mutualism, but we won’t go into that).</p><p class="Text">To translate between community matrices and food webs, I have implemented some simple tools which you can find definitions for in the original version of this post.</p><h2>Generalised Lotka-Volterra: How Does it Work?</h2><p>We can model competition and predation systems with more than two species using the generalised form of the Lotka-Volterra model, which we write: </p><figure class="post__image align-center"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-13.24.26.png" alt="" width="181" height="94" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.24.26-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.24.26-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.24.26-md.png 768w"></figure><p>where</p><ul><li><em>X</em> is a vector of population sizes or densities.</li><li>The vector <em>f</em> is given by <em>f</em>=<em>r</em>+<em>A</em><em>X</em>, where <em>r</em> is a vector of intrinsic growth rates, and <em>A </em>is the community matrix or interaction matrix of the system.</li></ul></div><div> </div><div class="cell-content">We will define the intrinsic growth rates slightly differently from our approach for the two-species model, as we assume that each species has a positive intrinsic growth rate. We account for the negative effect of a species' intraspecific competition in the absence of food (on its intrinsic growth rates) in the diagonal of the community matrix.<br><h2>Three Species Lotka-Volterra in the Wolfram Language</h2><p>First, let's define a function to generate ODEs for an n-species Lotka-Volterra model:</p><figure class="post__image"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-13.23.34.png" alt="" width="2102" height="886" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.23.34-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.23.34-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-13.23.34-md.png 768w"></figure><p class="Text">We can use <code><span class="InputInline"><span class="InputFormInline">GeneralizedLotkaVolterraODEs</span></span></code> to generate the system of ODEs for the given initial parameters:</p><ul><li class="Item"><em>vars</em> - a list of variable names (optional),</li><li class="Item"><em>init</em> - a list of initial population sizes</li><li class="Item"><em>r</em> - a list of species intrinsic growth rates</li><li class="Item"><em>interactionMatrix</em> - a matrix describing community interactions (in our examples, a community matrix)</li></ul><p class="CodeText"><em>Generate a system of ODEs for a Generalised Lotka-Volterra model from provided parameters:</em></p><figure class="post__image"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-16.20.24.png" alt="" width="582" height="310" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.20.24-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.20.24-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.20.24-md.png 768w"></figure><p>Using <code><span class="InputInline"><span class="InputFormInline">CommunityMatrixGraph</span></span></code> (see definition in original post), we can construct a weighted graph from the community matrix to get an idea of the relationships that define the system at a glance.</p><p><em>Visualise the community interactions described by the community matrix:</em></p><figure class="post__image"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-16.22.53.png" alt="" width="1278" height="526" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.22.53-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.22.53-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.22.53-md.png 768w"></figure><p>And <code><span class="InputInline"><span class="InputFormInline">NDSolve</span></span></code> to numerically approximate the population trajectories of the model.</p><p><em>Numerical solutions to the model ODEs:</em></p><figure class="post__image"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-16.23.38.png" alt="" width="1774" height="390" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.23.38-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.23.38-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.23.38-md.png 768w"></figure><p>We can then plot the solutions in the time domain and state space:</p><p><em>Time domain plot:</em></p><figure class="post__image"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-16.24.12.png" alt="" width="1564" height="638" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.24.12-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.24.12-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.24.12-md.png 768w"></figure><p><em>State space portrait (now in 3D!):</em></p><figure class="post__image"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-16.24.34.png" alt="" width="472" height="469" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.24.34-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.24.34-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.24.34-md.png 768w"></figure><h2>Closing Notes: Four species and more</h2><p class="Text">The generalised model we have discussed in this short text extends beyond three species systems. In fact, the tools we have developed will allow us to model any finite n-species closed-food web, that is, any system that we can express using a finite number of species initial population sizes, intrinsic growth rates, and interactions. It should be noted that just because we can specify a model does not always mean we can accurately solve for its behaviour: we are restricted by the limits of numerical approximation and our available computational power)</p><p class="Text">Still, we can easily model four species webs. Let’s prepare two four species models. We’ll define some weighted webs describing the various interaction effects of our system:</p><figure class="post__image align-center"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-16.25.03.png" alt="" width="380" height="318" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.25.03-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.25.03-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.25.03-md.png 768w"></figure><p>We can construct the community matrix describing either of these using the <code><span class="InputInline"><span class="InputFormInline">CommunityMatrix</span></span></code> function defined in the original version of this post. For example, take the first row of interaction webs from the above dataset:</p><figure class="post__image"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2023-10-10-at-15.20.16.png" alt="" width="403" height="136" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2023-10-10-at-15.20.16-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2023-10-10-at-15.20.16-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2023-10-10-at-15.20.16-md.png 768w"></figure><p><em>Time domain plot:</em></p><figure class="post__image"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-16.25.51.png" alt="" width="1932" height="1216" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.25.51-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.25.51-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.25.51-md.png 768w"></figure><figure class="post__image"><img loading="lazy" src="https://phileasdg.github.io/media/posts/32/Screenshot-2024-05-01-at-16.25.31.png" alt="" width="1892" height="938" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.25.31-xs.png 300w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.25.31-sm.png 480w, https://phileasdg.github.io/media/posts/32/responsive/Screenshot-2024-05-01-at-16.25.31-md.png 768w"></figure><p>To interact with this graphical user interface, head to the original version of this post.</p><p class="Text"><strong>Note:</strong> What happened to the state-space plot? Well, we’ve run out of spatial dimensions to express the behaviour of the system, and in the interest of keeping this post short, we’ll leave things there for now.</p><p class="Text">Consider what we have achieved in this short text. If you have read this far, I hope to have inspired you to think of how you might answer your own ecological questions in the Wolfram Language. If your questions expand on the subject of this post, I hope the tools I have developed within will help jumpstart your exploration! And please, don’t hesitate to reach out to me with any questions you may have about this work.</p><h2 class="Section">Sources Cited</h2><p class="Item">Allesina, Stefano. 2 Generalized Lotka-Volterra | A Tour of the Generalized Lotka-Volterra Model. Accessed 5 October 2023. <a href="https://stefanoallesina.github.io/Sao_Paulo_School/intro.html"><span class="HyperlinkInline">https://stefanoallesina.github.io/Sao_Paulo_School/intro.html</span></a>.</p><p class="Item">———. 2 Generalized Lotka-Volterra | A Tour of the Generalized Lotka-Volterra Model. Accessed 5 October 2023. <a href="https://stefanoallesina.github.io/Sao_Paulo_School/intro.html"><span class="HyperlinkInline">https://stefanoallesina.github.io/Sao_Paulo_School/intro.html</span></a>.</p><p class="Item">Bacaër, Nicolas. ‘Lotka, Volterra and the Predator–Prey System (1920–1926)’. In A Short History of Mathematical Population Dynamics, edited by Nicolas Bacaër, 71–76. London: Springer, 2011. <a href="https://doi.org/10.1007/978-0-85729-115-8_13"><span class="HyperlinkInline">https://doi.org/10.1007/978-0-85729-115-8_13</span></a>.</p><p class="Item">Baigent, Steve. ‘Lotka-Volterra Dynamics - An Introduction.’, 2010.</p><p class="Item">Hsu, Sze-Bi, Shigui Ruan, and Ting-Hui Yang. ‘Analysis of Three Species Lotka–Volterra Food Web Models with Omnivory’. Journal of Mathematical Analysis and Applications 426, no. 2 (15 June 2015): 659–87. <a href="https://doi.org/10.1016/j.jmaa.2015.01.035"><span class="HyperlinkInline">https://doi.org/10.1016/j.jmaa.2015.01.035</span></a>.</p><p class="Item">Kingsland, Sharon. ‘Alfred J. Lotka and the Origins of Theoretical Population Ecology’. Proceedings of the National Academy of Sciences of the United States of America 112, no. 31 (4 August 2015): 9493–95. <a href="https://doi.org/10.1073/pnas.1512317112"><span class="HyperlinkInline">https://doi.org/10.1073/pnas.1512317112</span></a>.</p><p class="Item">Lee, Benjamin. ‘Determination of the Parameters in Lotka-Volterra Equations from Population Measurements---Algorithms and Numerical Experiments’. SIAM Undergraduate Research Online 14 (1 January 2021). <a href="https://doi.org/10.1137/20S1383161"><span class="HyperlinkInline">https://doi.org/10.1137/20S1383161</span></a>.</p><p class="Item">Lotka, Alfred J. ‘Analytical Note on Certain Rhythmic Relations in Organic Systems’. Proceedings of the National Academy of Sciences of the United States of America 6, no. 7 (July 1920): 410–15.</p><p class="Item">———. ‘Contribution to the Theory of Periodic Reactions’. The Journal of Physical Chemistry 14, no. 3 (1 March 1910): 271–74. <a href="https://doi.org/10.1021/j150111a004"><span class="HyperlinkInline">https://doi.org/10.1021/j150111a004</span></a>.</p><p class="Item">———. ‘Natural Selection as a Physical Principle*’. Proceedings of the National Academy of Sciences 8, no. 6 (June 1922): 151–54. <a href="https://doi.org/10.1073/pnas.8.6.151"><span class="HyperlinkInline">https://doi.org/10.1073/pnas.8.6.151</span></a>.</p><p class="Item">Novak, Mark, Justin D. Yeakel, Andrew E. Noble, Daniel F. Doak, Mark Emmerson, James A. Estes, Ute Jacob, M. Timothy Tinker, and J. Timothy Wootton. ‘Characterizing Species Interactions to Understand Press Perturbations: What Is the Community Matrix?’ Annual Review of Ecology, Evolution, and Systematics 47, no. 1 (2016): 409–32. <a href="https://doi.org/10.1146/annurev-ecolsys-032416-010215"><span class="HyperlinkInline">https://doi.org/10.1146/annurev-ecolsys-032416-010215</span></a>.</p><p class="Item">Volterra, Vito. Variazioni e fluttuazioni del numero d’individui in specie animali conviventi, &amp;c. Memoria / R. comitato talassografico italiano, 1927.</p><h2 class="Section">Further Readings</h2><p class="Item">‘Lotka-Volterra Equations -- from Wolfram MathWorld’. Accessed 5 October 2023. <a href="https://mathworld.wolfram.com/Lotka-VolterraEquations.html"><span class="HyperlinkInline">https://mathworld.wolfram.com/Lotka-VolterraEquations.html</span></a>.</p><p class="Item">‘Lotka-Volterra Model - an Overview | ScienceDirect Topics’. Accessed 5 October 2023. <a href="https://www.sciencedirect.com/topics/earth-and-planetary-sciences/lotka-volterra-model"><span class="HyperlinkInline">https://www.sciencedirect.com/topics/earth-and-planetary-sciences/lotka-volterra-model</span></a>.</p><p class="Item">A Short History of Mathematical Population Dynamics by Nicolas Bacaër, n.d.</p><p class="Item">Essington, Timothy E. Introduction to Quantitative Ecology: Mathematical and Statistical Modelling for Beginners. Oxford, United Kingdom: Oxford University Press, 2021.</p><p class="Item">Kot, Mark. Elements of Mathematical Ecology. 1st edition. Cambridge: Cambridge University Press, 2001.</p></div></div></div></div></div></div></div><footer><p class="post__last-updated">This article was updated on May 2, 2024</p><div class="post__tags-share"><ul class="post__tag"><li><a href="https://phileasdg.github.io/tags/ecology/">Ecology</a></li><li><a href="https://phileasdg.github.io/tags/mathematica/">Mathematica</a></li><li><a href="https://phileasdg.github.io/tags/modelling/">Modelling</a></li><li><a href="https://phileasdg.github.io/tags/programming/">Programming</a></li><li><a href="https://phileasdg.github.io/tags/wolfram-language/">Wolfram Language</a></li><li><a href="https://phileasdg.github.io/tags/work-at-wolfram/">Work at Wolfram</a></li></ul><aside class="post__share"></aside></div><div class="post__bio author"><div><h3 class="h6 author__name"><a href="https://phileasdg.github.io/authors/phileas-dazeley-gaist/" class="invert" title="Phileas Dazeley-Gaist">Phileas Dazeley-Gaist</a></h3></div></div><nav class="post__nav"><div class="post__nav__prev"><a class="post__nav__link" href="https://phileasdg.github.io/remote-sensing-for-the-wolfram-language/" rel="prev">Previous Post<h3 class="h6">Remote Sensing for the Wolfram Language</h3></a></div><div class="post__nav__next"><a class="post__nav__link" href="https://phileasdg.github.io/adawdaw/" rel="prev">Next Post<h3 class="h6">A Dynamical Model of Immune-System Response to mRNA, Live Virus, and Inactivated Vaccines</h3></a></div></nav></footer></div></article></div><div class="post__related"><div class="wrapper"><h2 class="h5">Related posts</h2><div class="l-grid l-grid--4"><article class="c-card"><a href="https://phileasdg.github.io/remote-sensing-for-the-wolfram-language/" class="c-card__image"><img src="https://phileasdg.github.io/media/posts/28/BlogHeader-2.png" srcset="https://phileasdg.github.io/media/posts/28/responsive/BlogHeader-2-xs.png 300w, https://phileasdg.github.io/media/posts/28/responsive/BlogHeader-2-sm.png 480w, https://phileasdg.github.io/media/posts/28/responsive/BlogHeader-2-md.png 768w, https://phileasdg.github.io/media/posts/28/responsive/BlogHeader-2-lg.png 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="1017" width="2000" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://phileasdg.github.io/tags/gis/">GIS</a></div><h3 class="c-card__title"><a href="https://phileasdg.github.io/remote-sensing-for-the-wolfram-language/" class="invert">Remote Sensing for the Wolfram Language</a></h3></header><footer class="c-card__meta"><time datetime="2023-07-11T23:58">July 11, 2023</time></footer></div></article><article class="c-card"><a href="https://phileasdg.github.io/tracking-icebergs/" class="c-card__image"><img src="https://phileasdg.github.io/media/posts/8/Iceberg_Ilulissat.jpg" srcset="https://phileasdg.github.io/media/posts/8/responsive/Iceberg_Ilulissat-xs.jpg 300w, https://phileasdg.github.io/media/posts/8/responsive/Iceberg_Ilulissat-sm.jpg 480w, https://phileasdg.github.io/media/posts/8/responsive/Iceberg_Ilulissat-md.jpg 768w, https://phileasdg.github.io/media/posts/8/responsive/Iceberg_Ilulissat-lg.jpg 1200w" sizes="(min-width: 56.25em) 100vw, (min-width: 37.5em) 50vw, 100vw" loading="lazy" height="526" width="768" alt="CC BY-SA 3.0, https://commons.wikimedia.org/w/index.php?curid&#x3D;730855"></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://phileasdg.github.io/tags/gis/">GIS</a></div><h3 class="c-card__title"><a href="https://phileasdg.github.io/tracking-icebergs/" class="invert">Tracking Icebergs: Exploring the Mathematics of Iceberg Drift and Decay Models</a></h3></header><footer class="c-card__meta"><time datetime="2022-08-12T08:15">August 12, 2022</time></footer></div></article></div></div></div></main><footer class="footer"><div class="footer__social"><a href="https://www.instagram.com/phileasdg/" aria-label="Instagram" class="instagram"><svg><use xlink:href="https://phileasdg.github.io/assets/svg/svg-map.svg#instagram"/></svg> </a><a href="https://www.linkedin.com/in/phileas/" aria-label="LinkedIn" class="linkedin"><svg><use xlink:href="https://phileasdg.github.io/assets/svg/svg-map.svg#linkedin"/></svg> </a><a href="https://www.youtube.com/@phileasdg" aria-label="Youtube" class="youtube"><svg><use xlink:href="https://phileasdg.github.io/assets/svg/svg-map.svg#youtube"/></svg></a></div><div class="footer__copyright">Phileas Dazeley-Gaist</div></footer><script>window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://phileasdg.github.io/assets/js/scripts.min.js?v=66112a161d5939d966ce2b20c13988d9"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>